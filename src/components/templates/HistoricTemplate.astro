---
/**
 * SPEC-19: Historic Site Template
 * Appalachian Heritage Aesthetic with C→B→D→A Narrative Arc
 *
 * C (Balanced Truth) → B (Raw Reality) → D (Defiant Spirit) → A (Reverent Honor)
 */
import type { HistoricTemplateProps } from '../../types/templates/historic';
import HistoricHero from '../historic/HistoricHero.astro';
import HistoricalContextSection from '../historic/HistoricalContextSection.astro';
import PreservedStructuresSection from '../historic/PreservedStructuresSection.astro';
import ToursSection from '../historic/ToursSection.astro';
import ExhibitsSection from '../historic/ExhibitsSection.astro';
import EducationalProgramsSection from '../historic/EducationalProgramsSection.astro';
import VisitorInfoSection from '../historic/VisitorInfoSection.astro';
import NearbyHistorySection from '../historic/NearbyHistorySection.astro';

interface Props extends HistoricTemplateProps {}

const props = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{props.name} - WV Wild Outdoors Historic Sites</title>

  <!-- SPEC-19: Preconnect for Google Fonts (Roboto Slab, Oswald) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@700;900&family=Oswald:wght@600;700&display=swap" rel="stylesheet">
</head>
<body class="font-body bg-white text-brand-brown">

  <main>
    <!-- Phase 2: Hero Section (C Arc - Balanced Truth) -->
    <HistoricHero
      name={props.name}
      era={props.era}
      significance={props.significance}
      nationalRegister={props.nationalRegister}
      quickHighlights={props.quickHighlights}
      heroImage={props.heroImage}
      heroImageAlt={props.heroImageAlt}
      heroImageCredit={props.heroImageCredit}
    />

    <!-- Metal Seam Divider -->
    <div class="metal-seam" aria-hidden="true"></div>

    <!-- Phase 2: Historical Context Section (B Arc - Raw Reality) -->
    <HistoricalContextSection historicalContext={props.historicalContext} />

    <!-- Metal Seam Divider -->
    <div class="metal-seam" aria-hidden="true"></div>

    <!-- Phase 3: Preserved Structures Section (D Arc - Defiant Spirit) -->
    <PreservedStructuresSection
      structures={props.structures}
      siteMapUrl={props.siteMapUrl}
    />

    <!-- Metal Seam Divider -->
    <div class="metal-seam" aria-hidden="true"></div>

    <!-- Phase 3: Tours Section (Trail Markers) -->
    <ToursSection tours={props.tours} />

    <!-- Metal Seam Divider -->
    <div class="metal-seam" aria-hidden="true"></div>

    <!-- Phase 4: Exhibits Section (A Arc - Reverent Honor) -->
    <ExhibitsSection exhibits={props.exhibits} />

    <!-- Metal Seam Divider -->
    <div class="metal-seam" aria-hidden="true"></div>

    <!-- Phase 4: Educational Programs Section (A Arc - Reverent Honor) -->
    <EducationalProgramsSection education={props.education} />

    <!-- Metal Seam Divider -->
    <div class="metal-seam" aria-hidden="true"></div>

    <!-- Phase 4: Visitor Information Section (Utilitarian) -->
    <VisitorInfoSection visitorInfo={props.visitorInfo} />

    <!-- Metal Seam Divider -->
    <div class="metal-seam" aria-hidden="true"></div>

    <!-- Phase 4: Nearby History Section (Trail Connections) -->
    <NearbyHistorySection nearbyHistory={props.nearbyHistory} />
  </main>

</body>
</html>

<style>
  /* ======================================================================
     SPEC-19 Custom Styles: Appalachian Heritage Treatments
     ====================================================================== */

  /* Hero Image: Aged Photo Effect */
  .hero-aged-photo {
    filter: sepia(0.3) contrast(1.1) brightness(0.95) grayscale(0.2);
  }

  /* Hero Image Attribution Overlay */
  .hero-image-credit {
    position: absolute;
    bottom: 8px;
    right: 8px;
    background: rgba(66, 66, 66, 0.8); /* coal-gray with 80% opacity */
    color: #ffffff;
    font-size: 10px;
    padding: 4px 8px;
    border-radius: 2px; /* rounded-sm */
    font-family: 'Noto Sans', sans-serif;
    z-index: 10;
  }

  /* Stone-Carved Text Effect */
  .stone-text-shadow {
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.6);
  }

  /* Lumber Border: Asymmetric Thickness */
  .lumber-border {
    border-style: solid;
    border-color: var(--brand-brown, #3E2723);
    border-width: 3px 2px 4px 3px;
    box-shadow: 2px 3px 0 rgba(62, 39, 35, 0.3);
  }

  /* Metal Seam Divider */
  .metal-seam {
    border-top: 2px solid var(--coal-gray, #424242);
    border-bottom: 1px solid var(--creek-stone, #616161);
    height: 8px;
    background: repeating-linear-gradient(
      90deg,
      var(--coal-gray, #424242) 0px,
      var(--creek-stone, #616161) 2px,
      var(--coal-gray, #424242) 4px
    );
    margin: 3rem 0;
  }

  /* Aged Section Background (Subtle Texture) */
  .aged-section {
    background-color: #efebe2;
    background-image:
      linear-gradient(rgba(255,248,233,0.8), rgba(255,248,233,0.8)),
      url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIGJhc2VGcmVxdWVuY3k9Ii43NSIgc3RpdGNoVGlsZXM9InN0aXRjaCIgdHlwZT0iZnJhY3RhbE5vaXNlIi8+PGZlQ29sb3JNYXRyaXh0eXBlPSJzYXR1cmF0ZSIgdmFsdWVzPSIwIi8+PC9maWx0ZXI+PHBhdGggZD0iTTAgMGgzMDB2MzAwSDB6IiBmaWx0ZXI9InVybCgjYSkiIG9wYWNpdHk9Ii4wNSIvPjwvc3ZnPg==');
    background-blend-mode: overlay;
  }

  /* Painted Wood Shadow (Tours Section) */
  .shadow-painted-wood {
    box-shadow:
      inset 0 0 20px rgba(62, 39, 35, 0.1),
      3px 3px 0 rgba(0, 0, 0, 0.2);
  }

  /* Riveted Border Treatment */
  .riveted-border {
    position: relative;
    border: 2px solid var(--brand-brown, #3E2723);
  }

  .riveted-border::before,
  .riveted-border::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    background: var(--brand-brown, #3E2723);
    border-radius: 50%;
  }

  .riveted-border::before {
    top: -4px;
    left: -4px;
  }

  .riveted-border::after {
    top: -4px;
    right: -4px;
  }

  /* Bottom rivets via last-child pseudo-elements */
  .riveted-border > *:last-child {
    position: relative;
  }

  .riveted-border > *:last-child::before,
  .riveted-border > *:last-child::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    background: var(--brand-brown, #3E2723);
    border-radius: 50%;
    bottom: -4px;
  }

  .riveted-border > *:last-child::before {
    left: -4px;
  }

  .riveted-border > *:last-child::after {
    right: -4px;
  }

  /* ======================================================================
     Progressive Loading: Skeleton Screens
     ====================================================================== */

  /* Base skeleton shimmer animation */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      rgba(66, 66, 66, 0.1) 0%,
      rgba(66, 66, 66, 0.2) 50%,
      rgba(66, 66, 66, 0.1) 100%
    );
    background-size: 2000px 100%;
    animation: shimmer 2s linear infinite;
  }

  /* Blur-up image loading */
  .blur-up {
    opacity: 0;
    transition: opacity 0.3s ease-in;
  }

  .blur-up.loaded {
    opacity: 1;
  }

  /* Reduced Motion Preferences */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation: none !important;
      transition: none !important;
    }

    .skeleton-shimmer {
      animation: none;
      background: rgba(66, 66, 66, 0.1);
    }
  }

  /* Focus States (WCAG 2.1 AA) */
  a:focus-visible,
  button:focus-visible {
    outline: 2px solid var(--brand-orange, #FF6F00);
    outline-offset: 2px;
  }
</style>
