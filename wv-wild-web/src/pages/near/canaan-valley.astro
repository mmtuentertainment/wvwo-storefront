---
/**
 * Canaan Valley Resort Page
 * SPEC-15: Ski Resort Template Implementation
 *
 * Uses SkiTemplate component with content from adventures collection.
 */
import { getEntry } from 'astro:content';
import SkiTemplate from '../../components/templates/SkiTemplate.astro';

// Get the adventure entry for Canaan Valley
const adventure = await getEntry('adventures', 'canaan-valley');
if (!adventure) {
  throw new Error('Canaan Valley content not found in adventures collection');
}

const { data } = adventure;

// Map content collection data to SkiTemplateProps
const templateProps = {
  // Core identification
  name: data.title,
  slug: data.slug || 'canaan-valley',
  location: data.location,
  county: data.county || 'Tucker',

  // Hero content
  image: data.image || '/images/adventures/canaan-valley-hero.jpg',
  imageAlt: data.imageAlt || `${data.title} ski resort`,
  tagline: data.tagline || "West Virginia's Family Ski Destination",
  description: data.description,

  // Mountain stats
  elevation: data.elevation || { base: 3800, summit: 4280, vertical: 850 },
  season: data.skiSeason || { open: 'Mid-December', close: 'Mid-March' },
  quickStats: data.quickStats || ['47 Trails', '5 Lifts', "850' Vertical"],

  // Trails
  trails: data.trails || {
    total: 47,
    beginner: 17,
    intermediate: 21,
    advanced: 6,
    expert: 3,
    acreage: 95,
    longestRun: '1.25 miles',
  },

  // Lifts
  lifts: data.lifts || {
    total: 5,
    capacity: '7,200 skiers/hour',
    types: [
      { type: 'Triple Chair', count: 2 },
      { type: 'Double Chair', count: 2 },
      { type: 'Surface Lift', count: 1 },
    ],
  },

  // Snow conditions
  snowConditions: data.snowConditions || {
    averageSnowfall: '150 inches',
    snowmaking: '100% coverage',
    conditionsUrl: 'https://www.canaanresort.com/snow-report',
  },

  // Pricing
  pricing: data.pricing || {
    isDynamic: false,
    pricingUrl: 'https://www.canaanresort.com/rates',
    lastUpdated: 'December 2025',
    liftTickets: [],
    seasonPass: [],
  },

  // Optional sections
  terrainParks: data.terrainParks,
  lodging: data.lodging || [],
  dining: data.dining,
  amenities: data.amenities || [],
  summerActivities: data.summerActivities,
  parkAffiliation: data.parkAffiliation,
  nordicSkiing: data.nordicSkiing,
  passAffiliations: data.passAffiliations,
  kimTips: data.kimTips,

  // Shared components
  gearList: data.gearList || [],
  relatedShop: data.relatedShop || [],
  safety: data.safety || [],

  // Hero elements
  heroImage: data.heroImage || data.image || '/images/adventures/canaan-valley-hero.jpg',
  trailMapUrl: data.trailMapUrl,
  coordinates: data.coordinates,
};
---

<SkiTemplate {...templateProps} />
