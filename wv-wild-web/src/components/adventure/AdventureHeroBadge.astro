---
/**
 * AdventureHeroBadge.astro
 * SPEC-09: Adventure Hero Badge Component
 *
 * Displays contextual badges for difficulty, season, or drive time.
 * Uses shape icons for color-blind accessibility on difficulty badges.
 */

interface Props {
  type: 'difficulty' | 'season' | 'drive-time';
  value: string;
  difficulty?: 'easy' | 'moderate' | 'challenging' | 'rugged';
}

const { type, value, difficulty } = Astro.props;

/**
 * Shape icons for color-blind accessibility
 * Each difficulty level has a unique shape that remains distinguishable
 * regardless of color perception.
 */
const difficultyShapes: Record<NonNullable<Props['difficulty']>, string> = {
  easy: '\u25CF',      // ● (circle)
  moderate: '\u25B2',  // ▲ (triangle)
  challenging: '\u25A0',  // ■ (square)
  rugged: '\u25C6',    // ◆ (diamond)
};

/**
 * Color classes for each difficulty level
 * Colors tied to physical WV objects per WVWO aesthetic guidelines.
 */
const difficultyColors: Record<NonNullable<Props['difficulty']>, string> = {
  easy: 'bg-sign-green text-white',
  moderate: 'bg-brand-orange text-white',
  challenging: 'bg-brand-mud text-brand-cream',
  rugged: 'bg-red-800 text-white',
};

/**
 * Determine badge styling based on type
 */
function getBadgeClasses(): string {
  const baseClasses = 'inline-flex items-center gap-1.5 px-4 py-2 rounded-sm font-display font-bold text-sm';

  switch (type) {
    case 'difficulty':
      return `${baseClasses} ${difficulty ? difficultyColors[difficulty] : 'bg-brand-brown text-brand-cream'}`;
    case 'season':
      return `${baseClasses} bg-brand-cream text-brand-brown`;
    case 'drive-time':
      return `${baseClasses} bg-brand-brown/80 text-brand-cream`;
    default:
      return baseClasses;
  }
}

const badgeClasses = getBadgeClasses();
const shapeIcon = type === 'difficulty' && difficulty ? difficultyShapes[difficulty] : null;
---

<span class={badgeClasses}>
  {type === 'difficulty' && shapeIcon && (
    <span aria-hidden="true">{shapeIcon}</span>
  )}
  {type === 'drive-time' && (
    <svg aria-hidden="true" class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
      <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
    </svg>
  )}
  <span>{value}</span>
</span>
