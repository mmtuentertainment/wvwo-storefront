# Performance Optimization Documentation Index

**SPEC-12 Implementation: Tasks T-029 through T-033**

## Quick Navigation

### ðŸš€ Getting Started

- **[QUICK-START.md](./QUICK-START.md)** - 10-minute setup guide
  - Run all optimizations
  - Update components
  - Build and test

### ðŸ“š Comprehensive Guide

- **[PERFORMANCE-OPTIMIZATION-GUIDE.md](./PERFORMANCE-OPTIMIZATION-GUIDE.md)** - Complete reference
  - Detailed task breakdowns (T-029 to T-033)
  - Code examples and usage
  - Troubleshooting guide
  - Success criteria

### âœ… Implementation Tracking

- **[IMPLEMENTATION-CHECKLIST.md](./IMPLEMENTATION-CHECKLIST.md)** - Step-by-step checklist
  - Per-page tracking for all 5 WMAs
  - Verification steps
  - Testing procedures

### ðŸ§ª Testing Documentation

- **[../tests/performance/README.md](../../tests/performance/README.md)** - Testing suite
  - Lighthouse audit guide
  - Bundle analysis guide
  - CI/CD integration

### ðŸ“Š Completion Report

- **[T-029-T-033-COMPLETION-REPORT.md](./T-029-T-033-COMPLETION-REPORT.md)** - Task summary
  - All deliverables created
  - Files and scripts inventory
  - Next steps for implementation

---

## Tasks Overview

### T-029: Image Optimization

**Goal**: Hero images <500KB, WebP format, responsive srcsets

**Script**: `wv-wild-web/scripts/performance/image-optimizer.mjs`

**Command**: `npm run perf:images`

**Output**: 400w, 800w, 1200w WebP images per WMA

---

### T-030: CSS Optimization

**Goal**: Extract critical CSS, inline in <head>, defer full CSS

**Script**: `wv-wild-web/scripts/performance/critical-css-extractor.mjs`

**Command**: `npm run perf:css`

**Output**: Critical CSS files + CriticalCSS.astro component

---

### T-031: Font Optimization

**Goal**: Subset WVWO fonts, preload critical, target <75KB

**Script**: `wv-wild-web/scripts/performance/font-optimizer.mjs`

**Command**: `npm run perf:fonts`

**Output**: FontPreload.astro component with optimized loading

---

### T-032: Lighthouse Audits

**Goal**: Achieve â‰¥95/100 Performance on all 5 WMAs

**Script**: `tests/performance/lighthouse-audit.mjs`

**Command**: `npm run perf:lighthouse`

**Output**: HTML reports + console summary

---

### T-033: Bundle Analysis

**Goal**: Validate page weight <500KB, identify bottlenecks

**Script**: `tests/performance/bundle-analyzer.mjs`

**Command**: `npm run perf:bundle`

**Output**: Per-component size breakdown + recommendations

---

## WMA Pages

All optimizations target these 5 pages:

1. `/near/elk-river`
2. `/near/burnsville-lake`
3. `/near/summersville-lake`
4. `/near/holly-river`
5. `/near/cranberry`

---

## Performance Targets (SPEC-12)

**Lighthouse**:

- Performance: â‰¥95/100
- Accessibility: â‰¥90/100
- Best Practices: â‰¥90/100
- SEO: â‰¥90/100

**Core Web Vitals**:

- LCP (Largest Contentful Paint): <2.5s
- FID (First Input Delay): <100ms
- CLS (Cumulative Layout Shift): <0.1

**Page Weight**:

- Total: <500KB
- JS: <150KB
- CSS: <15KB
- Images: <500KB
- Fonts: <75KB

**Load Time**:

- 3G network: <2 seconds

---

## File Structure

```
wvwo-storefront/
â”œâ”€â”€ wv-wild-web/
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ performance/
â”‚   â”‚       â”œâ”€â”€ image-optimizer.mjs       # T-029
â”‚   â”‚       â”œâ”€â”€ critical-css-extractor.mjs # T-030
â”‚   â”‚       â””â”€â”€ font-optimizer.mjs        # T-031
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ CriticalCSS.astro        # Generated by T-030
â”‚   â”‚   â”‚   â””â”€â”€ FontPreload.astro        # Generated by T-031
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â””â”€â”€ critical/                 # Generated critical CSS
â”‚   â””â”€â”€ package.json.patch                # NPM scripts to add
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ performance/
â”‚       â”œâ”€â”€ lighthouse-audit.mjs          # T-032
â”‚       â”œâ”€â”€ bundle-analyzer.mjs           # T-033
â”‚       â”œâ”€â”€ reports/                      # Lighthouse HTML reports
â”‚       â””â”€â”€ README.md                     # Testing documentation
â””â”€â”€ docs/
    â””â”€â”€ performance/
        â”œâ”€â”€ INDEX.md                      # This file
        â”œâ”€â”€ QUICK-START.md
        â”œâ”€â”€ PERFORMANCE-OPTIMIZATION-GUIDE.md
        â”œâ”€â”€ IMPLEMENTATION-CHECKLIST.md
        â””â”€â”€ T-029-T-033-COMPLETION-REPORT.md
```

---

## Quick Commands Reference

```bash
# Navigate to project
cd wv-wild-web

# Run all optimizations
npm run perf:all

# Individual optimizations
npm run perf:images    # T-029: Image optimization
npm run perf:css       # T-030: Critical CSS
npm run perf:fonts     # T-031: Font optimization

# Build and test
npm run build
npm run perf:bundle    # T-033: Bundle analysis

# Lighthouse audits (requires preview server)
npm run preview &
npm run perf:lighthouse # T-032: Lighthouse audits
```

---

## Implementation Order

1. **Setup** (1 min)
   - Merge `package.json.patch` into `wv-wild-web/package.json`
   - Place WMA hero images in `public/images/wma/`

2. **Run Optimizations** (5 min)
   - `npm run perf:all`

3. **Update Components** (2 min)
   - Import `CriticalCSS` and `FontPreload` in Layout.astro
   - Pass `page` prop from each WMA page

4. **Update WMA Pages** (10 min)
   - Replace `<img>` with optimized `<picture>` elements
   - Add responsive srcsets
   - Configure lazy loading

5. **Build & Test** (5 min)
   - `npm run build`
   - `npm run perf:bundle`
   - `npm run preview & npm run perf:lighthouse`

6. **Validate** (2 min)
   - Check all 5 pages meet targets
   - Review Lighthouse reports
   - Verify bundle sizes

**Total Time**: ~25 minutes

---

## Support & Troubleshooting

### Common Issues

**"Sharp library not found"**

```bash
cd wv-wild-web
npm install sharp
```

**"dist directory not found"**

```bash
npm run build
```

**"Connection refused" (Lighthouse)**

```bash
npm run preview  # Start server first
```

### Getting Help

1. Check [PERFORMANCE-OPTIMIZATION-GUIDE.md](./PERFORMANCE-OPTIMIZATION-GUIDE.md) troubleshooting section
2. Review [IMPLEMENTATION-CHECKLIST.md](./IMPLEMENTATION-CHECKLIST.md) for missed steps
3. See [../tests/performance/README.md](../../tests/performance/README.md) for testing issues

---

## Success Criteria

**All 5 WMA pages achieve**:

- âœ… Lighthouse Performance â‰¥95/100
- âœ… Load time <2s on 3G
- âœ… Page weight <500KB
- âœ… LCP <2.5s, FID <100ms, CLS <0.1

**Completion Status**: 5/5 pages optimized = âœ… PASS

---

**Documentation Version**: 1.0.0
**Last Updated**: 2025-12-27
**Status**: Complete - Ready for Implementation
